{
"version":3,
"file":"module$node_modules$svg_pan_zoom$src$svg_utilities.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/svg-pan-zoom/src/svg-utilities.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$svg_pan_zoom$src$svg_utilities\"] = function(global,require,module,exports) {\nvar Utils = require('./utilities')\n  , _browser = 'unknown'\n  ;\n\n// http://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\nif (/*@cc_on!@*/false || !!document.documentMode) { // internet explorer\n  _browser = 'ie';\n}\n\nmodule.exports = {\n  svgNS:  'http://www.w3.org/2000/svg'\n, xmlNS:  'http://www.w3.org/XML/1998/namespace'\n, xmlnsNS:  'http://www.w3.org/2000/xmlns/'\n, xlinkNS:  'http://www.w3.org/1999/xlink'\n, evNS:  'http://www.w3.org/2001/xml-events'\n\n  /**\n   * Get svg dimensions: width and height\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {Object}     {width: 0, height: 0}\n   */\n, getBoundingClientRectNormalized: function(svg) {\n    if (svg.clientWidth && svg.clientHeight) {\n      return {width: svg.clientWidth, height: svg.clientHeight}\n    } else if (!!svg.getBoundingClientRect()) {\n      return svg.getBoundingClientRect();\n    } else {\n      throw new Error('Cannot get BoundingClientRect for SVG.');\n    }\n  }\n\n  /**\n   * Gets g element with class of \"viewport\" or creates it if it doesn't exist\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {SVGElement}     g (group) element\n   */\n, getOrCreateViewport: function(svg, selector) {\n    var viewport = null\n\n    if (Utils.isElement(selector)) {\n      viewport = selector\n    } else {\n      viewport = svg.querySelector(selector)\n    }\n\n    // Check if there is just one main group in SVG\n    if (!viewport) {\n      var childNodes = Array.prototype.slice.call(svg.childNodes || svg.children).filter(function(el){\n        return el.nodeName !== 'defs' && el.nodeName !== '#text'\n      })\n\n      // Node name should be SVGGElement and should have no transform attribute\n      // Groups with transform are not used as viewport because it involves parsing of all transform possibilities\n      if (childNodes.length === 1 && childNodes[0].nodeName === 'g' && childNodes[0].getAttribute('transform') === null) {\n        viewport = childNodes[0]\n      }\n    }\n\n    // If no favorable group element exists then create one\n    if (!viewport) {\n      var viewportId = 'viewport-' + new Date().toISOString().replace(/\\D/g, '');\n      viewport = document.createElementNS(this.svgNS, 'g');\n      viewport.setAttribute('id', viewportId);\n\n      // Internet Explorer (all versions?) can't use childNodes, but other browsers prefer (require?) using childNodes\n      var svgChildren = svg.childNodes || svg.children;\n      if (!!svgChildren && svgChildren.length > 0) {\n        for (var i = svgChildren.length; i > 0; i--) {\n          // Move everything into viewport except defs\n          if (svgChildren[svgChildren.length - i].nodeName !== 'defs') {\n            viewport.appendChild(svgChildren[svgChildren.length - i]);\n          }\n        }\n      }\n      svg.appendChild(viewport);\n    }\n\n    // Parse class names\n    var classNames = [];\n    if (viewport.getAttribute('class')) {\n      classNames = viewport.getAttribute('class').split(' ')\n    }\n\n    // Set class (if not set already)\n    if (!~classNames.indexOf('svg-pan-zoom_viewport')) {\n      classNames.push('svg-pan-zoom_viewport')\n      viewport.setAttribute('class', classNames.join(' '))\n    }\n\n    return viewport\n  }\n\n  /**\n   * Set SVG attributes\n   *\n   * @param  {SVGSVGElement} svg\n   */\n  , setupSvgAttributes: function(svg) {\n    // Setting default attributes\n    svg.setAttribute('xmlns', this.svgNS);\n    svg.setAttributeNS(this.xmlnsNS, 'xmlns:xlink', this.xlinkNS);\n    svg.setAttributeNS(this.xmlnsNS, 'xmlns:ev', this.evNS);\n\n    // Needed for Internet Explorer, otherwise the viewport overflows\n    if (svg.parentNode !== null) {\n      var style = svg.getAttribute('style') || '';\n      if (style.toLowerCase().indexOf('overflow') === -1) {\n        svg.setAttribute('style', 'overflow: hidden; ' + style);\n      }\n    }\n  }\n\n/**\n * How long Internet Explorer takes to finish updating its display (ms).\n */\n, internetExplorerRedisplayInterval: 300\n\n/**\n * Forces the browser to redisplay all SVG elements that rely on an\n * element defined in a 'defs' section. It works globally, for every\n * available defs element on the page.\n * The throttling is intentionally global.\n *\n * This is only needed for IE. It is as a hack to make markers (and 'use' elements?)\n * visible after pan/zoom when there are multiple SVGs on the page.\n * See bug report: https://connect.microsoft.com/IE/feedback/details/781964/\n * also see svg-pan-zoom issue: https://github.com/ariutta/svg-pan-zoom/issues/62\n */\n, refreshDefsGlobal: Utils.throttle(function() {\n    var allDefs = document.querySelectorAll('defs');\n    var allDefsCount = allDefs.length;\n    for (var i = 0; i < allDefsCount; i++) {\n      var thisDefs = allDefs[i];\n      thisDefs.parentNode.insertBefore(thisDefs, thisDefs);\n    }\n  }, this ? this.internetExplorerRedisplayInterval : null)\n\n  /**\n   * Sets the current transform matrix of an element\n   *\n   * @param {SVGElement} element\n   * @param {SVGMatrix} matrix  CTM\n   * @param {SVGElement} defs\n   */\n, setCTM: function(element, matrix, defs) {\n    var that = this\n      , s = 'matrix(' + matrix.a + ',' + matrix.b + ',' + matrix.c + ',' + matrix.d + ',' + matrix.e + ',' + matrix.f + ')';\n\n    element.setAttributeNS(null, 'transform', s);\n    if ('transform' in element.style) {\n      element.style.transform = s;\n    } else if ('-ms-transform' in element.style) {\n      element.style['-ms-transform'] = s;\n    } else if ('-webkit-transform' in element.style) {\n      element.style['-webkit-transform'] = s;\n    }\n\n    // IE has a bug that makes markers disappear on zoom (when the matrix \"a\" and/or \"d\" elements change)\n    // see http://stackoverflow.com/questions/17654578/svg-marker-does-not-work-in-ie9-10\n    // and http://srndolha.wordpress.com/2013/11/25/svg-line-markers-may-disappear-in-internet-explorer-11/\n    if (_browser === 'ie' && !!defs) {\n      // this refresh is intended for redisplaying the SVG during zooming\n      defs.parentNode.insertBefore(defs, defs);\n      // this refresh is intended for redisplaying the other SVGs on a page when panning a given SVG\n      // it is also needed for the given SVG itself, on zoomEnd, if the SVG contains any markers that\n      // are located under any other element(s).\n      window.setTimeout(function() {\n        that.refreshDefsGlobal();\n      }, that.internetExplorerRedisplayInterval);\n    }\n  }\n\n  /**\n   * Instantiate an SVGPoint object with given event coordinates\n   *\n   * @param {Event} evt\n   * @param  {SVGSVGElement} svg\n   * @return {SVGPoint}     point\n   */\n, getEventPoint: function(evt, svg) {\n    var point = svg.createSVGPoint()\n\n    Utils.mouseAndTouchNormalize(evt, svg)\n\n    point.x = evt.clientX\n    point.y = evt.clientY\n\n    return point\n  }\n\n  /**\n   * Get SVG center point\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {SVGPoint}\n   */\n, getSvgCenterPoint: function(svg, width, height) {\n    return this.createSVGPoint(svg, width / 2, height / 2)\n  }\n\n  /**\n   * Create a SVGPoint with given x and y\n   *\n   * @param  {SVGSVGElement} svg\n   * @param  {Number} x\n   * @param  {Number} y\n   * @return {SVGPoint}\n   */\n, createSVGPoint: function(svg, x, y) {\n    var point = svg.createSVGPoint()\n    point.x = x\n    point.y = y\n\n    return point\n  }\n}\n\n};"],
"names":["shadow$provide","global","require","module","exports","Utils","_browser","document","documentMode","svgNS","xmlNS","xmlnsNS","xlinkNS","evNS","getBoundingClientRectNormalized","svg","clientWidth","clientHeight","width","height","getBoundingClientRect","Error","getOrCreateViewport","selector","viewport","isElement","querySelector","childNodes","Array","prototype","slice","call","children","filter","el","nodeName","length","getAttribute","viewportId","toISOString","Date","replace","createElementNS","setAttribute","svgChildren","i","appendChild","classNames","split","indexOf","push","join","setupSvgAttributes","setAttributeNS","parentNode","style","toLowerCase","internetExplorerRedisplayInterval","refreshDefsGlobal","throttle","allDefs","querySelectorAll","allDefsCount","thisDefs","insertBefore","setCTM","element","matrix","defs","that","s","a","b","c","d","e","f","transform","window","setTimeout","getEventPoint","evt","point","createSVGPoint","mouseAndTouchNormalize","x","clientX","y","clientY","getSvgCenterPoint"]
}
