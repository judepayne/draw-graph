<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>How to use draw-graph</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>How to use draw-graph</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table Of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_graph_terminology">1.1. graph terminology</a></li>
</ul>
</li>
<li><a href="#_the_gui">2. The GUI</a>
<ul class="sectlevel2">
<li><a href="#_the_examples_drop_down">2.1. The Examples drop down</a></li>
<li><a href="#_data_input">2.2. Data input</a></li>
<li><a href="#_local_or_remote_processing">2.3. Local or Remote processing</a></li>
<li><a href="#_the_draw_graph_button">2.4. The draw-graph button</a></li>
<li><a href="#_the_save_image_button">2.5. The Save image button</a></li>
<li><a href="#_the_graph_display_area">2.6. The Graph display area</a></li>
</ul>
</li>
<li><a href="#_input_formats">3. Input formats</a>
<ul class="sectlevel2">
<li><a href="#_defining_nodes_edges_and_clusters_with_data">3.1. Defining Nodes, Edges and Clusters with data</a>
<ul class="sectlevel3">
<li><a href="#_node_metadata">3.1.1. Node metadata</a></li>
<li><a href="#_node_styling_information">3.1.2. Node styling information</a></li>
<li><a href="#_edge_metadata">3.1.3. Edge Metadata</a></li>
<li><a href="#_edge_styling_information">3.1.4. Edge Styling information</a></li>
<li><a href="#_clusters">3.1.5. Clusters</a></li>
</ul>
</li>
<li><a href="#_csv_format">3.2. CSV format</a>
<ul class="sectlevel3">
<li><a href="#_working_up_the_data">3.2.1. Working up the data</a></li>
<li><a href="#_special_characters_including_line_breaks">3.2.2. Special characters, including line breaks</a></li>
<li><a href="#_the_header_row">3.2.3. The header row</a></li>
<li><a href="#_edges_rows">3.2.4. Edges rows</a>
<ul class="sectlevel4">
<li><a href="#_specifying_nodes">Specifying nodes</a></li>
<li><a href="#_styling_nodes">Styling nodes</a></li>
<li><a href="#_edge_meta_data">Edge meta data</a></li>
<li><a href="#_styling_edges">Styling edges</a></li>
</ul>
</li>
<li><a href="#_node_rows">3.2.5. Node rows</a>
<ul class="sectlevel4">
<li><a href="#_node_synonyms">Node Synonyms</a></li>
</ul>
</li>
<li><a href="#_cluster_style_rows">3.2.6. Cluster Style rows</a></li>
<li><a href="#_cluster_edge_rows_and_cluster_to_parent_rows">3.2.7. Cluster Edge rows and Cluster to parent rows</a></li>
<li><a href="#_commenting_out_lines">3.2.8. Commenting out lines</a></li>
</ul>
</li>
<li><a href="#_json_format">3.3. JSON format</a></li>
<li><a href="#_options">3.4. Options</a>
<ul class="sectlevel3">
<li><a href="#_draw_graph_options">3.4.1. draw-graph options</a></li>
<li><a href="#_graphviz_options">3.4.2. Graphviz options</a>
<ul class="sectlevel4">
<li><a href="#_layout">layout</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_saving_the_graph_image">4. Saving the graph image</a>
<ul class="sectlevel2">
<li><a href="#_layout_tricks">4.1. Layout tricks</a></li>
<li><a href="#_1_two_facing_trees">4.2. 1. Two facing trees</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p><strong>draw-graph</strong> allows you to produce graph/ network diagrams from simple data descriptions.<br>
 Network diagrams show how things connect - i.e. boxes and
arrows diagrams.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/boxes_and_arrows.png" alt="boxes and arrows"></span></p>
</div>
<div class="paragraph">
<p>Mostly you&#8217;d use a vector drawing tool like Visio or Powerpoint to produce these types of diagram. Those types of tools are fine choices for a lot of network diagramming needs. draw-graph separates the data that describes the graph from the visualisation step and that gives you a lot of additional power in certain situations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When your diagram is going to be complex and laying it out is going to be or is becomming time consuming.</p>
</li>
<li>
<p>Your diagram is likely to evolve over time. Changing the data and regenerating the visualisation of the data is often quicker and having to edit the whole diagram.</p>
</li>
<li>
<p>You have a series of diagrams to produce from related data. It could be easier to keep your data together and produce different cuts of it for visualisation.</p>
</li>
<li>
<p>You wish to work with a visualisation dynamically, showing what it looks like when grouped a certain way or filtered just so. The draw-graph front end provides lots of options from changing your visualisation dynamically.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>draw-graph is powered by Graphviz, a very capable (and complex!) library for displaying graph/ network diagrams. Unfortunately for the non-technical user, the input format for Graphviz, the dot language, can be rather complex. Although it can be written by hand, for large graphs, it’s often preferable to produce the dot format programmatically.</p>
</div>
<div class="paragraph">
<p>draw-graph solves this problem by using a csv (comma separated values) input format that you would typically prepare in a spreadsheet before uploading or pasting into draw-graph. draw-graph then gives you access to some of the key Graphviz settings for controlling the display in a simple way.</p>
</div>
<div class="paragraph">
<p>In addition to the core Graphviz functionality, draw-graph goes beyond by introducing both preprocessing and postprocessing stages.</p>
</div>
<div class="paragraph">
<p>Preprocessing allows for facilities like filtering the graph or finding
paths through it. It also takes alot of acquired knowledge about how to get Graphviz to produce a diagram that looks just so and systemises it so that you as the user don&#8217;t have to bother about it too much.<br>
Postprocessing tweaks the appearance of the image returned by Graphviz to improve it and make it closer to the sort of diagram that you might have produced by hand.</p>
</div>
<div class="sect2">
<h3 id="_graph_terminology">1.1. graph terminology</h3>
<div class="paragraph">
<p>Graphs are a key data structure used in computer science, and come with their own fairly straightforward terminology:</p>
</div>
<div class="paragraph">
<p><strong>nodes</strong> are nodes in your graph - the boxes on your diagram. In graph terminology, these are often called vertices.</p>
</div>
<div class="paragraph">
<p>A node might participate in none, one or many..</p>
</div>
<div class="paragraph">
<p><strong>edges</strong> are connections between two nodes in a graph - the arrows on
your diagram. Edges can be individually styled within the data you load
into draw-graph.</p>
</div>
<div class="paragraph">
<p><strong>clusters</strong> are sections within the graph, best thought of as a
group of nodes. In draw-graph and Graphviz, clusters may be nested.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_gui">2. The GUI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The draw graph gui has been kept simple and is hopefully fairly intuitive, but here&#8217;s a brief guide.</p>
</div>
<div class="sect2">
<h3 id="_the_examples_drop_down">2.1. The Examples drop down</h3>
<div class="paragraph">
<p>There&#8217;s a range of examples to look through. Each one sets up both data in the data input area and the options below that.</p>
</div>
<div class="paragraph">
<p>The examples are worth looking though to see the range of what draw-graph can do.</p>
</div>
</div>
<div class="sect2">
<h3 id="_data_input">2.2. Data input</h3>
<div class="paragraph">
<p>The large text area is for input of the data description of the graph. There are two ways to input data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>Load csv</strong> button is used to select a csv file that you have locally whose contents you would like to load.</p>
</li>
<li>
<p>You can type or paste the data directly into the data input area.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In draw-graph the data formats (csv and json, both described in this guide) contain a mix of metadata about your graph (i.e. the nodes and edges) along with information for their visual styling.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Styling information is highlighted in a different colour from the graph metadata (in the csv format).
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_local_or_remote_processing">2.3. Local or Remote processing</h3>
<div class="paragraph">
<p>Next to the draw-graph banner, you’ll see the word `local'. Click on it
and it will be toggle to `remote'. Local means that all processing is peformed locally in the browser. In remote mode, data is sent to an
Amazon AWS server for processing using https encryption. Local mode is
more suitable for if for example your company’s policy forbids sending
out of data.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_draw_graph_button">2.4. The draw-graph button</h3>
<div class="paragraph">
<p>Press this to generate the graph from your data.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_save_image_button">2.5. The Save image button</h3>
<div class="paragraph">
<p>Press this to save your file as an .svg file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_graph_display_area">2.6. The Graph display area</h3>
<div class="paragraph">
<p>The visualised graph will be displayed here. It is zoomable and panable using the standard mouse/ touch controls.</p>
</div>
<div class="paragraph">
<p>If there was some kind of problem, this error is also where the error message will be displayed instead of the graph.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_input_formats">3. Input formats</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please use the <strong>`Examples'</strong> drop down on the main page to see what is
achievable with draw-graph and see how the data specification of the
graph is used to do that.</p>
</div>
<div class="sect2">
<h3 id="_defining_nodes_edges_and_clusters_with_data">3.1. Defining Nodes, Edges and Clusters with data</h3>
<div class="sect3">
<h4 id="_node_metadata">3.1.1. Node metadata</h4>
<div class="paragraph">
<p>A node in draw-graph is a 'map' - an arbitrary series of keys and their values.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>city=Jackson   population=43,800   latitude=41N</pre>
</div>
</div>
<div class="paragraph">
<p>is an example map with three keys and their associated values.</p>
</div>
<div class="paragraph">
<p>By having a flexible map as the data structure for describing nodes, draw-graph allows us to embed a lot of different aspects in the data and then choose how to visualise that later.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Every node in draw-graph must contain the same keys.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Sometimes, a particular key is not really relevant for a particular node, but draw-graph insists that you treat the nodes as if it has that key - the value can be left blank.</p>
</div>
</div>
<div class="sect3">
<h4 id="_node_styling_information">3.1.2. Node styling information</h4>
<div class="paragraph">
<p>Node styling information is also an <em>optional</em> map of keys and values. In this case, draw-graph directly uses the Graphviz attributes for styling nodes.</p>
</div>
<div class="paragraph">
<p>For example, specifying:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>bgcolor:red</pre>
</div>
</div>
<div class="paragraph">
<p>would set the background colour of the node to red.</p>
</div>
<div class="paragraph">
<p>Please have a look through the examples drop down to see how styles work.<br>
The definitive guide though is on <a href="https://www.graphviz.org/doc/info/attrs.html">this</a> Graphviz page.</p>
</div>
</div>
<div class="sect3">
<h4 id="_edge_metadata">3.1.3. Edge Metadata</h4>
<div class="paragraph">
<p>An edge in draw-graph is somewhat more loosely defined that a node. In fact it needn&#8217;t be defined separately at all. It&#8217;s <em>optional</em>. Just specifying that this node connects to that node implies an edge.</p>
</div>
<div class="paragraph">
<p>However, it&#8217;s also possible to decorate that edge with metadata about it. The metadata again takes the form of a map: keys and values.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Unlike node metadata, there&#8217;s no necessity for all edges to have the same keys.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_edge_styling_information">3.1.4. Edge Styling information</h4>
<div class="paragraph">
<p>Edge styling information is an <em>optional</em> map of keys and values.<br>
Just as with node styling information, draw-graph directly use the Graphviz attributes for styling edges.</p>
</div>
<div class="paragraph">
<p>Please see the draw-graph examples and the <a href="https://www.graphviz.org/doc/info/attrs.html">Graphviz guide</a> for node and edge attributes.</p>
</div>
</div>
<div class="sect3">
<h4 id="_clusters">3.1.5. Clusters</h4>
<div class="paragraph">
<p>Clusters are best thought of as a grouping of the metadata of the nodes in your graph. For example, if all the nodes have a key for 'city' that setting the option <code>cluster by</code> to 'city' will group the graph by city.</p>
</div>
<div class="paragraph">
<p>Clusters can be used in different contexts in the data you specify draw-graph.</p>
</div>
<div class="paragraph">
<p>Firstly, they can be styled using the same Graphviz styling attributes as previously described for nodes and edges. This is like thinking of a cluster as a 'box' around a group of nodes and specifying the styling attributes for that box.</p>
</div>
<div class="paragraph">
<p>As well as styling clusters, you can specify how they relate to each
other to control the layout of the graph, whilst letting Graphviz get on with what its good at; the complex business of laying out nodes and
edges. We’ll get into how a little bit further down in the 'CSV format'
section. Cluster relationships are useful in (and limited to) the <code>dot</code> layout - more below.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_csv_format">3.2. CSV format</h3>
<div class="paragraph">
<p>In the data that you make describing the diagram you want, the keys are specified just once in the header row, and the values are specified for each node.</p>
</div>
<div class="paragraph">
<p>Nodes can be individually styled within the data you load into
draw-graph.</p>
</div>
<div class="paragraph">
<p>As previously mentioned, nodes in draw-graph are each specified as a map of key value pairs, but to avoid you having to write down the keys over and over, keys are only specified once, in the header row. This works because, in draw-graph, <em>every node in a graph must have exactly the same keys</em> (again, <em>individual values</em> can be left blank).</p>
</div>
<div class="sect3">
<h4 id="_working_up_the_data">3.2.1. Working up the data</h4>
<div class="paragraph">
<p>The draw-graph web does provide a small text area for working with the
data but an easier way to work up the data is in a spreadsheet. For
example:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/spreadsheet.png%20=600x350" alt="two trees facing one way"></span></p>
</div>
<div class="paragraph">
<p>The data was typed in the columns to the left and then in the column
marked as blue, a spreadsheet formula concatenates the contents of the
previous columns together. When it was ready, the contents of that
column were copied and paste into the draw-graph text area.</p>
</div>
</div>
<div class="sect3">
<h4 id="_special_characters_including_line_breaks">3.2.2. Special characters, including line breaks</h4>
<div class="paragraph">
<p>draw-graph uses 3 special characters in its input format. Avoid these in the data that you supply. They are <code>|</code> <code>:</code> and <code>,</code></p>
</div>
<div class="paragraph">
<p>commas <code>,</code> can be escaped in node meta data and edge meta data by
putting a backslash in front of the character. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>...:shar\,har:...</pre>
</div>
</div>
<div class="paragraph">
<p>At the moment, the other two special characters <code>|</code> and <code>:</code> cannot
be escaped at this time.</p>
</div>
<div class="paragraph">
<p>Sometimes, you may have a node for which the label you want to use is
much longer than its peers. In this case, it’s useful to break it over
two or more lines. This can be achieved by putting a <code>\n</code> line break
character in the node or edge meta data. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>...:This is a very\nlong label:...</pre>
</div>
</div>
<div class="paragraph">
<p>With both escaped characters and line breaks, please remember to use
this consistently across the node when it appears across all the edges
that it participates in. For example if a node is defined as</p>
</div>
<div class="literalblock">
<div class="content">
<pre>...:shar\,har:...</pre>
</div>
</div>
<div class="paragraph">
<p>in one node, and</p>
</div>
<div class="literalblock">
<div class="content">
<pre>...:sharhar:...</pre>
</div>
</div>
<div class="paragraph">
<p>in another, draw-graph will assume that they are two different nodes.</p>
</div>
<div class="paragraph">
<p>In the header row (below), avoid the character <code>/</code> in the specified
keys as this has a special meaning. See 'fallback labels' below.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
The special characters <code>|</code> and <code>:</code> cannot currently be escaped and should be avoided in your data altogether.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_the_header_row">3.2.3. The header row</h4>
<div class="paragraph">
<p>The header row is a list of the keys in each node, separated by the
colon character. It must always be started with <code>h,</code> For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>h,class:name:id</pre>
</div>
</div>
<div class="paragraph">
<p>is a valid header row where the subsequent definition of each row should
be a colon separated list of the values for <code>class</code>, <code>name</code> and
<code>id</code>. The only character not allowed within each key itself is a
comma.</p>
</div>
<div class="paragraph">
<p>The header row should always come first in the csv file you upload or
data you type in to draw-graph’s text entry box.</p>
</div>
</div>
<div class="sect3">
<h4 id="_edges_rows">3.2.4. Edges rows</h4>
<div class="paragraph">
<p>Edge rows are used the specify the data that makes up the graph. Think
of it as one node’s connection to another.</p>
</div>
<div class="paragraph">
<p>The overall format of an edge row is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>e,&lt;first node&gt;|&lt;first node styles&gt;,&lt;second node&gt;|&lt;second nodes styles&gt;,&lt;edge meta&gt;|&lt;edge styles&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Any/all of the following parts may be omitted:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>|&lt;first node styles&gt;
|&lt;second nodes styles&gt;
,&lt;edge meta&gt;
,|&lt;edge styles&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>An edge row should always be started with <code>e,</code> to tell draw-graph what
type of row it is.</p>
</div>
<div class="sect4">
<h5 id="_specifying_nodes">Specifying nodes</h5>
<div class="paragraph">
<p>Since the keys in each nodes have already been specified in the header
row, only the values now need to be specified.</p>
</div>
<div class="paragraph">
<p>For example (assuming the header row above):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>e,Bluebird-class:Simon:1434,Yellow-class:Anita:20345</pre>
</div>
</div>
<div class="paragraph">
<p>is a valid simple edge where the nodes are:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>class=Bluebird-class:name=Simon:id=1434</pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="literalblock">
<div class="content">
<pre>class=Yellow-class:name=Anita:id=20345</pre>
</div>
</div>
<div class="paragraph">
<p>When written out in key=value format.</p>
</div>
<div class="paragraph">
<p>As in the header row, a colon is used to separate the different values
in the node.</p>
</div>
<div class="paragraph">
<p>You can also pack additional styling information into an edge row, both
to style one or both of the nodes and the edge itself (i.e. the
connector between nodes).</p>
</div>
</div>
<div class="sect4">
<h5 id="_styling_nodes">Styling nodes</h5>
<div class="paragraph">
<p>Styling information for the nodes can be embedded in the node itself
using the <code>|</code> character.</p>
</div>
<div class="paragraph">
<p>For example in the edge that we used previously:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Bluebird-class:Simon:1434,Yellow-class:Anita:20345</pre>
</div>
</div>
<div class="paragraph">
<p>adding</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Bluebird-class:Simon:1434|shape:septagon:fillcolor:blue:,Yellow-class:Anita:20345</pre>
</div>
</div>
<div class="paragraph">
<p>will style the Simon node according to those Graphviz attributes
specified. Please see the links just above for a description of all
available attributes and colours.</p>
</div>
<div class="paragraph">
<p>One node in your graph might occur many times in the data you load, as
that node participates in multiple edges. Styling it once is sufficient
in the data. If you style the same nodes appearing in different edges
differently, then styles are merged with the repeated styling attributes
in the last node winning over the previous.</p>
</div>
<div class="paragraph">
<p>Styles set on a node will win out over global defaults specified by
draw-graph’s options. For example, if you specify <code>shape:rect</code> on a
node, but <code>ellipse</code> in the <code>node shape' option, then `+rect+</code> will win
out for that node.</p>
</div>
<div class="paragraph">
<p>There’s a complete description of all attributes
<a href="https://www.graphviz.org/doc/info/attrs.html">here</a> and the various
colours (also from Graphviz) are specified
<a href="https://www.graphviz.org/doc/info/colors.html">here</a>, although it’s also
fine to specify a color in hex format e.g. #4286f4 (please google for
`color picker').</p>
</div>
<div class="paragraph">
<p>Please see the same Graphviz page as linked above for a comprehensive
list of all the available attributes.</p>
</div>
</div>
<div class="sect4">
<h5 id="_edge_meta_data">Edge meta data</h5>
<div class="paragraph">
<p>Edge meta data is specified as a chain of key value pairs and can be
anything you want, bearing in mind the limitations from the special
characters section. It’s form is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>key1:value1:key2:value2:key3... etc</pre>
</div>
</div>
<div class="paragraph">
<p>Edge meta data is useful for display as labels on your edges. There’s an
option described below called <code>edge labels' where you can specify one of
the keys to be used across all edge labels. It’s also useful for
filtering down to a particular set of edges e.g. </code>+volume&gt;100+` using
the `filter graph' option described below. It’s generally useful to have
a standard set of edge meta data keys across all edges so that labels
and filtering can be consistently applied. The example called `Complex
architecture diagram' is a good example use of edge meta data.</p>
</div>
</div>
<div class="sect4">
<h5 id="_styling_edges">Styling edges</h5>
<div class="paragraph">
<p>Optionally an edge row can have an additional comma after the data of
the two nodes have been specified followed by a <code>|</code> character and then
a list of keys and values that are used to specify how that particular
edge is to be displayed. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Bluebird-class:Simon:1434,Yellow-class:Anita:20345,|color:deeppink:thickness:2</pre>
</div>
</div>
<div class="paragraph">
<p>The edge attributes used to specify display of the edges are actually
Graphviz attributes.</p>
</div>
<div class="paragraph">
<p>Useful common ones include <code>label</code> (a text label for the edge),
<code>style</code> (e.g. set to <code>dashed</code> or don’t set for an undashed line, or
set to <code>invis</code> for no line at all), <code>penwidth</code> (the thickness of the
edge, for example, try a value of 5 for a thick line). If you specify
any attributes here that can also be set globally by a draw-graph
option, for example the label, the per-edge setting specified the data
will win out over the default specified in the options.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_node_rows">3.2.5. Node rows</h4>
<div class="paragraph">
<p>Nodes rows are entirely optional in draw-graph but are a convenience
that allow you to specify edge rows (see below) a bit more concisely.</p>
</div>
<div class="paragraph">
<p>The overall format of a node row is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>n,&lt;node synonym&gt;,&lt;node/ node meta data&gt;|&lt;node styles&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>|&lt;node styles&gt;</code> part is optional.</p>
</div>
<div class="paragraph">
<p>A node row should always be started with <code>n,</code> to tell draw-graph what
type of row it is.</p>
</div>
<div class="sect4">
<h5 id="_node_synonyms">Node Synonyms</h5>
<div class="paragraph">
<p>The node synonym is a short name for the node that is useful in
specifying edges more concisely and readably. For example, given two
node rows of</p>
</div>
<div class="literalblock">
<div class="content">
<pre>n,node_max,pandas:max
n,node_sim,pandas:simone|fillcolor:blue</pre>
</div>
</div>
<div class="paragraph">
<p>you can specify an edge as</p>
</div>
<div class="literalblock">
<div class="content">
<pre>e,node_max,node_sim</pre>
</div>
</div>
<div class="paragraph">
<p>instead of</p>
</div>
<div class="literalblock">
<div class="content">
<pre>e,pandas:max,pandas:simone|fillcolor:blue</pre>
</div>
</div>
<div class="paragraph">
<p>A node synonym must always start with `node' followed by any sequence of
alphanumeric and underscore characters. Any of the following is a valid
node synonym:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>node_1
node1
node_A1
node_a_thing_that_bit_me_2</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cluster_style_rows">3.2.6. Cluster Style rows</h4>
<div class="paragraph">
<p>Cluster Style rows are not used to specify if/ how nodes should be put
into clusters in the graph, but they are used just for styling the
clusters. A cluster style row is always started with a <code>cs,</code>.</p>
</div>
<div class="paragraph">
<p>A cluster style row has the form:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cs,Yellow-class|bgcolor:cornsilk1:style:rounded</pre>
</div>
</div>
<div class="paragraph">
<p>It always has to start with <code>cs</code> to indicate the type of row. Before
the <code>|</code> you put the value of the cluster that you are styling, and
after, a colon separated list of Graphviz key value pairs. Please see
the same links as before.</p>
</div>
<div class="paragraph">
<p>If you click through the <strong>Examples</strong> on the main page, you’ll see how
various effects can be achieved. There’s a section on more advanced
layout tricks, where you need to understand more about Graphviz, further
down on this page.</p>
</div>
<div class="paragraph">
<p>For a comprehensive list of all Graphviz attributes that can be applied
to nodes, edges and clusters, here’s the
<a href="https://www.graphviz.org/doc/info/attrs.html">link</a> again.</p>
</div>
</div>
<div class="sect3">
<h4 id="_cluster_edge_rows_and_cluster_to_parent_rows">3.2.7. Cluster Edge rows and Cluster to parent rows</h4>
<div class="paragraph">
<p>The final two types of rows are really only useful when the <code>dot</code>
layout is selected in the options. Graphviz’ dot layout is probably the
most useful, and with it we can get the closest to using Graphviz and
draw-graph are a diagramming tool. The key concept to understand with
dot is <strong><em>rank</em></strong>.</p>
</div>
<div class="paragraph">
<p>Please go back to the main page and select the <code>Friendship graph</code>
example and hit the 'draw-graph' button. In that graph (which is laid
out by 'dot'), The node <code>Cristolene</code> has an edge that points to
<code>Shahar</code>. Graphviz infers that <code>Sharhar</code> has a lower <em>rank</em> than
<code>Cristolene</code>, and so is laid out <code>below</code> it. I put below in quotes
because you can lay out the graph top to bottom, left to right etc using
the <code>rankdir</code> option. In the same graph, see how there’s an edge from
<code>kacey</code> in the pandas cluster to <code>cosmo</code> in the brownbears cluster? That causes <code>cosmo</code> to have a lower rank than <code>kacey</code> and so the brownbears cluster starts lower down than the pandas one. But what if you wanted to brownbears to be below pandas?</p>
</div>
<div class="paragraph">
<p>Add this definition line somewhere in the data lines and press
'draw-graph' again.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>e,pandas:Bridget,brownbears:cosmo</pre>
</div>
</div>
<div class="paragraph">
<p>We chose <code>Bridget</code> because that node in the lowest ranked in pandas.</p>
</div>
<div class="paragraph">
<p>draw-graph automates this for you. Rather than specifying relationships
between nodes to control cluster layout, you can specify <em>cluster edge
rows</em> directly. cluster edge rows always start with a <code>ce,</code></p>
</div>
<div class="paragraph">
<p>Delete the line you just added, and replace it with this one.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>ce,pandas:brownbears</pre>
</div>
</div>
<div class="paragraph">
<p>and hit <code>draw-graph</code> again. brownbears is placed below pandas and the
edges that draw-graph creates to control that are styled as invisible,
so they don’t appear in the display. Actually, they’re stripped out of
the svg by Graphviz while its creating it, so are not even present if
you decide to edit the svg in an editor program later. You can specify
multiple cluster edges on a single <code>ce,</code> line so</p>
</div>
<div class="literalblock">
<div class="content">
<pre>ce,pandas:brownbears:pandas:squirrels</pre>
</div>
</div>
<div class="paragraph">
<p>will bring the squirrels cluster below pandas also. It’s also fine to
specify <code>ce,</code> relationships on multiple lines, which, for clarify, is
preferable.</p>
</div>
<div class="paragraph">
<p>A note on the implementation of cluster edges. The Graphviz layout
engine has no concept of the relative position of clusters. Rather they
are just boxes draw around the nodes they contain. In order to introduce
relative positoning, draw-line creates a lot of invisible edges between
nodesin the two clusters you specify an edge between in the graph just
before it is rendered. These edges have <code>constraint:true</code> set -
i.e. they participate in and influence the <em>rank</em>. If you ever want to
see these edges, there’s an option called <code>show invisible constraints</code>.
Cluster edges only work in one direction. For example if you <code>dot</code>
layout graph has a <code>rankdir' (another option) set to `TB</code>, i.e. Top to
Bottom, then cluster edges can be used to say that one cluster is
'below' another.. but there’s no 'to the left of' instruction available
at the same time.</p>
</div>
<div class="paragraph">
<p>draw-graph offers the option to control the number of inter-node edges
used to implement each cluster edge. Low numbers might not be enough to
push your clusters into the desired relative positions given all the
other edges that you’ve specified in the graph that could also be
influencing rank. Higher numbers lock the relative position of clusters
very effectively but can cause Graphviz to produce a wide graph (which
can be countered by setting the `concentrate' option to true).</p>
</div>
<div class="paragraph">
<p>Generally you want the lowest number of cluster edges that produce the
desired cluster positioning.</p>
</div>
<div class="paragraph">
<p><em>Cluster&#8594;parent</em> rows are a bit different. They’re for nesting
clusters. Cluster&#8594;parent rows are started with a <code>cp,</code>. Remove all
the <code>ce,</code> lines you added above and instead, add this line to the
data:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cp,squirrels:pandas</pre>
</div>
</div>
<div class="paragraph">
<p>which is used to denote that pandas is the parent cluster of squirrels.
Hit `draw-graph' again and you’ll see the squirrels cluster moved inside the 'pandas' cluster at the position determined by the relative rank of the node within it to the other nodes inside pandas.</p>
</div>
<div class="paragraph">
<p>Now let’s add a virtual node. Keeping the line above in place, add
another new line to the data:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cp,pandas:are they bears</pre>
</div>
</div>
<div class="paragraph">
<p>The new cluster you just added, <code>are they bears</code>, is not styled yet,
so add another line, a cluster style line like so:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cs,are they bears|bgcolor:lightgray</pre>
</div>
</div>
<div class="paragraph">
<p>Another example in the drop down list - Friendship cluster layout -
shows a more complicated example of what can be achieved with cluster
edge rows and cluster&#8594;parent rows. draw-graph adds these in order to
get the most out of Graphviz’ dot layout and help you produce `what
connects to what' style diagrams which are pretty common in the work
place.</p>
</div>
</div>
<div class="sect3">
<h4 id="_commenting_out_lines">3.2.8. Commenting out lines</h4>
<div class="paragraph">
<p>Use a semi-colon `;' or a double semi-colon `;;' at the beginning or any
line in the input data, apart from the header line which must always be
present, to have draw-graph ignore the line. This is often useful while
you’re working.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_json_format">3.3. JSON format</h3>
<div class="paragraph">
<p>draw-graph also supports json as an input format and there are a couple
of examples in the drop down. For fuller details of the format please
see the
<a href="https://github.com/judepayne/draw-graph/tree/master/cmd-draw-graph">github
page</a> of the command line tool version of draw-graph.</p>
</div>
</div>
<div class="sect2">
<h3 id="_options">3.4. Options</h3>
<div class="paragraph">
<p>We’ve already covered how the styling of nodes, edges and clusters is
embedded in the data definition itself. Options is for globally
controlling either styling aspects for the whole graph, or for
performing operations (e.g. filtering) on the whole graph.</p>
</div>
<div class="paragraph">
<p>Draw-graph splits the options into two sections, those provided by
draw-graph itself and those which are pass throughs into Graphviz
settings.</p>
</div>
<div class="sect3">
<h4 id="_draw_graph_options">3.4.1. draw-graph options</h4>
<div class="paragraph">
<p><code>node label</code> is the key from your data to be used as the label on each
node.</p>
</div>
<div class="paragraph">
<p><em>Fallback labels &amp; Composite labels</em></p>
</div>
<div class="paragraph">
<p>Sometimes in one of your nodes, one of the values might be missing and
it’s valid that it’s missing e.g. </p>
</div>
<div class="literalblock">
<div class="content">
<pre>Bluebird-class::1434</pre>
</div>
</div>
<div class="paragraph">
<p>In this case, you can specify <code>node-label</code> with a fallback key to use,
or multiple fallback keys for that matter. e.g. rather than just
<code>name</code>, specify as <code>name/id</code> or even <code>name/id/class</code></p>
</div>
<div class="paragraph">
<p>Composite labels are a way of putting more information into each of the
labels on your nodes. For example setting the <code>node label' option to
`+name&amp;id+</code> would put the values for both those keys onto each node.</p>
</div>
<div class="paragraph">
<p><code>cluster on</code> clusters the graph on one of the keys from your data. For
example, setting cluster-on `class' will group the graph by `class'.</p>
</div>
<div class="paragraph">
<p><code>color on</code> controls how the color for a node is chosen. By default,
draw-graph will generate a light random color for each node based on the
setting for <code>cluster-on</code> unless you set <code>color-on</code> differently. Any
node color specified directly in the input data will override this.</p>
</div>
<div class="paragraph">
<p><code>node-tooltips</code> In the output image, node tooltips will appear when
hovering over each node. <code>node-tooltips</code> should be specified as one or
more of the keys in the input data. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>name</pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="literalblock">
<div class="content">
<pre>name/animal</pre>
</div>
</div>
<div class="paragraph">
<p><code>node-url</code> if one of the key - value pairs on your node data is a url.
then that key can be selected here and in the output image, clicking on
that node, will take you to the url (in a new browser tab page).</p>
</div>
<div class="paragraph">
<p><code>filter-graph</code> allows you to specify filtering terms which are applied
in the preprocessing stage. For example, pick the <code>Architecture diagram'
example and press draw-graph. In the example, the keys for the nodes and
`+view+</code>, <code>function</code> and <code>application</code>. Set <code>filter-graph</code> to:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>function = Capture</pre>
</div>
</div>
<div class="paragraph">
<p>and press draw-graph again.</p>
</div>
<div class="paragraph">
<p>Now set <code>filter-graph</code> to:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>function = Capture or function = Lifecycle</pre>
</div>
</div>
<div class="paragraph">
<p>and hit draw-graph again. A filter-graph `expression' is made up of a
series of `terms'. At present, logical `or' is provided for joining the
terms into an expression. logical `and' may well be provided in futures.
An expression where several terms are over the same key as above can be
written more concisely as:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>function in (Capture, Lifecycle)</pre>
</div>
</div>
<div class="paragraph">
<p>Asides from the equality operator (written as <code>=</code> or <code>:</code>),
inequality operators (<code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code> and <code>&gt;=</code>) are also
available. These will only be applied to numreic values.</p>
</div>
<div class="paragraph">
<p>A filter expression needn’t have each term over the same key.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>function = Capture or application = hePikes</pre>
</div>
</div>
<div class="paragraph">
<p>is valid and will pull in the application called `hePikes' as well as
all applications in the Caputre function in the Complex Architecture
digram example.</p>
</div>
<div class="paragraph">
<p>Each term in the filter expression is applied to every node and every
edge is the graph, but when a node or edge does not contain the
specified key with it, it automatically passes that particular term.</p>
</div>
<div class="paragraph">
<p>For example, say every node in your graph had the keys:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>view:function:application:id:level</pre>
</div>
</div>
<div class="paragraph">
<p>and every edge the keys:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>volume:format:level</pre>
</div>
</div>
<div class="paragraph">
<p>A filter term based on `function' say would end up only being applied to
nodes. A term based on `volume' only to edges, but a term based on
`level' would be applied to both nodes and edges. You could use this to,
for example, nest different levels of detail within a single graph
description and effectively zoom in and out, as you zoomed out seeing
summary level nodes and edges for example.</p>
</div>
<div class="paragraph">
<p>The functionality to take a sql-like statement is supplied by the
library <a href="https://github.com/judepayne/clj-sql-pred">clj-sql-pred</a>. Please
have a look there to understand the full syntax of the sql-like command
language for filtering.</p>
</div>
<div class="paragraph">
<p><code>paths</code> is a slightly more complex way of effectively filtering the
graph. Pick the `Architecture diagram' again and enter:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>function in (Capture, Lifecycle) | function = Reporting</pre>
</div>
</div>
<div class="paragraph">
<p><code>paths</code> is made up of two filter expressions separated with the pipe
character <code>|'. The graph is filtered both for the first filter
expression and the second. Each filter expression is this time run only
over the nodes of the graph. Then a pathfinding algorithm is run between
all combinations of the first set of nodes and the second. Any other
nodes found on any of those paths (as well as the start and end nodes
captured by the filter terms) are shown in the resulting graph.
`+paths+</code> is useful for answering questions about how certain domains
connect and what do those connections pass through.</p>
</div>
<div class="paragraph">
<p><code>elide lower levels</code> will hide the lowest levels (the `leaf' nodes) in
the graph.</p>
</div>
<div class="paragraph">
<p><code>highlight roots?</code> :true/false - will highlight root nodes in the
graph as stars symbols. Root nodes are nodes which don’t have any edges
going into them.</p>
</div>
<div class="paragraph">
<p><strong><code>post process</code></strong> set this true to have draw-graph postprocess the
output image with the controls.</p>
</div>
<div class="paragraph">
<p>Simulated annealing is an algorithm that is used to find an optimal
solution for a system, given constraints. In this case the system is a
series of boxes (clusters) and they are subject to small random moves.
Overall the system is trying to find the solution where the boxes cover
the greatest possible area, given the constraints that no box can
overlap another, or it’s boundary or any obstacles in the system (which
are represented by the darker boxes).</p>
</div>
<div class="paragraph">
<p>Postprocessing is mainly for the Graphviz `dot' layout.</p>
</div>
<div class="paragraph">
<p><code>anneal expand clusters</code> controls the directions in which annealing
can expand clusters.</p>
</div>
<div class="paragraph">
<p><code>anneal bias</code> In order to get a good result, in a `dot' TB layout (the
graph is laid out Top to Bottom) left and right random moves are on
average n times bigger than up down, where n is the number than you set
in the box. `3' seems to work well.</p>
</div>
<div class="paragraph">
<p><code>anneal cluster separation</code> is the gap in pixels which should be
preserved between clusters during annealing. If this field is unset,
then draw-graph picks up the gaps left by Graphviz and uses those.</p>
</div>
<div class="paragraph">
<p><code>font</code>. Type the name of a font that you want uses for all text in the
image. `sans-serif' and `serif' are good choices as they are not tied to
the particular machine you’re working on and will look roughly the same
to everyone.</p>
</div>
<div class="paragraph">
<p><code>number cluster edges</code> As described above, this is the number of edges
between nodes in two clusters that are generated to force Graphviz to
position clusters relative to each other.</p>
</div>
</div>
<div class="sect3">
<h4 id="_graphviz_options">3.4.2. Graphviz options</h4>
<div class="paragraph">
<p>In this section of the options panel, draw-graph exposes a select few important Graphviz options.</p>
</div>
<div class="sect4">
<h5 id="_layout">layout</h5>
<div class="paragraph">
<p>This is a Graphviz setting that determines how the graph
gets laid out. possible settings are `dot' `fdp' `neato' `circo'
`twopi'. Please note, that of these, several layouts do not support
clustering. It’s worth experimenting with the layout options as these
make dramatic differences to the look of the graph. More information is
available <a href="https://www.graphviz.org">here.</a> (under `Roadmap'). Also,
please click through the Examples and note the settings that are used
for each. The dot layout is the default and will get you closer to the
look and feel of a hand drawn diagram that other layouts which tend to
be more specialist.</p>
</div>
<div class="paragraph">
<p><strong>Please note</strong> that for large graphs - more than a hundred edges - the
`dot' layout will be much faster than the other two.</p>
</div>
<div class="paragraph">
<p><code>rankdir</code> is a Graphviz setting that only applies to the dot layout.
It controls whether the graph is laid out left to right, top to bottom,
etc.</p>
</div>
<div class="paragraph">
<p><code>node shape</code> is a Graphviz setting which controls the style of node
shape</p>
</div>
<div class="paragraph">
<p><code>node fixedsize</code> controls whether all nodes are the same size or
adapted to their text content.</p>
</div>
<div class="paragraph">
<p><code>splines</code> is a Graphviz setting which controls the style of edges.</p>
</div>
<div class="paragraph">
<p><code>nodesep</code> is a Graphviz setting which specifies the gap (in inches)
between nodes in the same rank.</p>
</div>
<div class="paragraph">
<p><code>ranksep</code> is a Graphviz setting which specifies the gap (in inches)
between different ranks in the graph. See ’Two facing trees’ in the
Graphviz layout tricks section below.</p>
</div>
<div class="paragraph">
<p><code>concentrate</code> draws edges that have a common end point closer
together. Useful in large graphs.</p>
</div>
<div class="paragraph">
<p><code>overlap</code> is a Graphviz setting which controls whether/ how nodes are
allowed to overlap.</p>
</div>
<div class="paragraph">
<p><code>scale</code> is a Graphviz setting which scales the graph after layout.</p>
</div>
<div class="paragraph">
<p><code>edges constaints</code> is a key control, especially in dot layouts. When
set to false the edges in your graphs don’t contributes to the ranking
algorithm (that ranks nodes top to bottom/ left to right etc) according
to how they point to each other. There’s an example on rank below.</p>
</div>
<div class="paragraph">
<p>For more information on any of the Graphviz settings, please see
<a href="https://www.graphviz.org/doc/info/attrs.html">here</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_saving_the_graph_image">4. Saving the graph image</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can save you image as an .svg file into the downloads folder that
your browser uses.</p>
</div>
<div class="sect2">
<h3 id="_layout_tricks">4.1. Layout tricks</h3>
<div class="paragraph">
<p>Here are some tips on how to solve certain graph layout challenges.</p>
</div>
</div>
<div class="sect2">
<h3 id="_1_two_facing_trees">4.2. 1. Two facing trees</h3>
<div class="paragraph">
<p><em>The importance of rank</em> in `dot' layouts.</p>
</div>
<div class="paragraph">
<p>Sometimes you might want to show how the nodes in two tree-like clusters
relate to each other, but can face a problem that both trees face the
same way, when you would rather have them facing each other. Here’s an
example of the problem: <span class="image"><img src="img/two-trees1.png" alt="two trees facing one way"></span></p>
</div>
<div class="paragraph">
<p>The trick to fixing this problem is to understand Graphviz’s concept of
rank (in the dot layout). In the image, prds:b2 points to grc:b1. That’s
why the whole grc cluster is shifted to the right of prds. We can fix
this and get the grc cluster over to the right and facing back towards
prds by reversing the direction of all the edges <em>just inside the grc
cluster/tree</em>. We’ll also need to get the arrows inside the grc cluster
to point the other way.</p>
</div>
<div class="paragraph">
<p>So for example the edge:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>grc:a1,grc:b1</pre>
</div>
</div>
<div class="paragraph">
<p>Needs to become</p>
</div>
<div class="literalblock">
<div class="content">
<pre>grc:b1,grc:a1,dir:back</pre>
</div>
</div>
<div class="paragraph">
<p>If you do that for each of the internal edges of grc, the resulting
image will look like so: <span class="image"><img src="img/two-trees2.png" alt="two trees facing each other"></span></p>
</div>
<div class="paragraph">
<p>Finally, for larger trees when many connections between them, you might
want to separate the two trees more. This can be accomplished by adding
on an attribute to the edges <em>between the two trees</em> <code>minlen:5</code> - or
any number for the `minimum length' that you want.</p>
</div>
<div class="paragraph">
<p>Please see the `two facing trees' example and its data for how this
accomplished for two larger trees that need to face each other.</p>
</div>
<div class="paragraph">
<p>In different types of pictures using the dot layout, fine tuning the
layout can usually be accomplished by playing around with the relative
rank of nodes by for example turning <code>edge constraints</code> in the options
to false and introducing <code>invisible edges' with `+constraint:true+</code> in
their attributes. Draw-graph itself makes extensive use of invisible
edges*, such that it is recommended not to use them yourself (i.e. don’t
add <code>style:invis</code> to your edges). Instead, make the edges fully
transparent in color. See for example the <code>Complex cluster layout'
example which has an edge with the color set as so: `+color:#c731ed00+</code>.
Adding <code>00</code> on the end of any hex color code is the recommended way to
make <code>constraint:true</code> edges invisible.</p>
</div>
<div class="paragraph">
<p>*For expressing the layout of cluster edges.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-07-29 06:19:41 +0200
</div>
</div>
</body>
</html>