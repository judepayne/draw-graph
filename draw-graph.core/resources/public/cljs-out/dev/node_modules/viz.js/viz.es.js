goog.provide("module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es");
goog.provide("module$viz");
goog.provide("module$viz_js$viz_es");
var _typeof$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};
var classCallCheck$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");};
var createClass$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,
protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _extends$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)if(Object.prototype.hasOwnProperty.call(source,key))target[key]=source[key]}return target};
var WorkerWrapper$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es=function(){function WorkerWrapper(worker){var _this=this;classCallCheck$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es(this,WorkerWrapper);this.worker=worker;this.listeners=[];this.nextId=0;this.worker.addEventListener("message",function(event){var id=event.data.id;var error=event.data.error;var result=event.data.result;_this.listeners[id](error,
result);delete _this.listeners[id]})}createClass$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es(WorkerWrapper,[{key:"render",value:function render(src,options){var _this2=this;return new Promise(function(resolve,reject){var id=_this2.nextId++;_this2.listeners[id]=function(error,result){if(error){reject(new Error(error.message,error.fileName,error.lineNumber));return}resolve(result)};_this2.worker.postMessage({id:id,src:src,options:options})})}}]);return WorkerWrapper}();
var ModuleWrapper$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es=function ModuleWrapper(module,render){classCallCheck$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es(this,ModuleWrapper);var instance=module();this.render=function(src,options){return new Promise(function(resolve,reject){try{resolve(render(instance,src,options))}catch(error){reject(error)}})}};
function b64EncodeUnicode$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es(str){return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,function(match,p1){return String.fromCharCode("0x"+p1)}))}function defaultScale$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es(){if("devicePixelRatio"in window&&window.devicePixelRatio>1)return window.devicePixelRatio;else return 1}
function svgXmlToImageElement$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es(svgXml){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var _ref$scale=_ref.scale;var scale=_ref$scale===undefined?defaultScale$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es():_ref$scale;var _ref$mimeType=_ref.mimeType;var mimeType=_ref$mimeType===undefined?"image/png":_ref$mimeType;var _ref$quality=_ref.quality;
var quality=_ref$quality===undefined?1:_ref$quality;return new Promise(function(resolve,reject){var svgImage=new Image;svgImage.onload=function(){var canvas=document.createElement("canvas");canvas.width=svgImage.width*scale;canvas.height=svgImage.height*scale;var context=canvas.getContext("2d");context.drawImage(svgImage,0,0,canvas.width,canvas.height);canvas.toBlob(function(blob){var image=new Image;image.src=URL.createObjectURL(blob);image.width=svgImage.width;image.height=svgImage.height;resolve(image)},
mimeType,quality)};svgImage.onerror=function(e){var error;if("error"in e)error=e.error;else error=new Error("Error loading SVG");reject(error)};svgImage.src="data:image/svg+xml;base64,"+b64EncodeUnicode$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es(svgXml)})}
function svgXmlToImageElementFabric$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es(svgXml){var _ref2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var _ref2$scale=_ref2.scale;var scale=_ref2$scale===undefined?defaultScale$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es():_ref2$scale;var _ref2$mimeType=_ref2.mimeType;var mimeType=_ref2$mimeType===undefined?"image/png":_ref2$mimeType;var _ref2$quality=
_ref2.quality;var quality=_ref2$quality===undefined?1:_ref2$quality;var multiplier=scale;var format=void 0;if(mimeType=="image/jpeg")format="jpeg";else if(mimeType=="image/png")format="png";return new Promise(function(resolve,reject){fabric.loadSVGFromString(svgXml,function(objects,options){if(objects.length==0)reject(new Error("Error loading SVG with Fabric"));var element=document.createElement("canvas");element.width=options.width;element.height=options.height;var canvas=new fabric.Canvas(element,
{enableRetinaScaling:false});var obj=fabric.util.groupSVGElements(objects,options);canvas.add(obj).renderAll();var image=new Image;image.src=canvas.toDataURL({format:format,multiplier:multiplier,quality:quality});image.width=options.width;image.height=options.height;resolve(image)})})}
var Viz$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es=function(){function Viz(){var _ref3=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var workerURL=_ref3.workerURL;var worker=_ref3.worker;var Module=_ref3.Module;var render=_ref3.render;classCallCheck$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es(this,Viz);if(typeof workerURL!=="undefined")this.wrapper=new WorkerWrapper$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es(new Worker(workerURL));
else if(typeof worker!=="undefined")this.wrapper=new WorkerWrapper$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es(worker);else if(typeof Module!=="undefined"&&typeof render!=="undefined")this.wrapper=new ModuleWrapper$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es(Module,render);else if(typeof Viz.Module!=="undefined"&&typeof Viz.render!=="undefined")this.wrapper=new ModuleWrapper$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es(Viz.Module,
Viz.render);else throw new Error("Must specify workerURL or worker option, Module and render options, or include one of full.render.js or lite.render.js after viz.js.");}createClass$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es(Viz,[{key:"renderString",value:function renderString(src){var _ref4=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var _ref4$format=_ref4.format;var format=_ref4$format===undefined?"svg":_ref4$format;var _ref4$engine=
_ref4.engine;var engine=_ref4$engine===undefined?"dot":_ref4$engine;var _ref4$files=_ref4.files;var files=_ref4$files===undefined?[]:_ref4$files;var _ref4$images=_ref4.images;var images=_ref4$images===undefined?[]:_ref4$images;var _ref4$yInvert=_ref4.yInvert;var yInvert=_ref4$yInvert===undefined?false:_ref4$yInvert;var _ref4$nop=_ref4.nop;var nop=_ref4$nop===undefined?0:_ref4$nop;for(var i=0;i<images.length;i++)files.push({path:images[i].path,data:'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8" standalone\x3d"no"?\x3e\n\x3c!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"\x3e\n\x3csvg width\x3d"'+
images[i].width+'" height\x3d"'+images[i].height+'"\x3e\x3c/svg\x3e'});return this.wrapper.render(src,{format:format,engine:engine,files:files,images:images,yInvert:yInvert,nop:nop})}},{key:"renderSVGElement",value:function renderSVGElement(src){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return this.renderString(src,_extends$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es({},options,{format:"svg"})).then(function(str){var parser=
new DOMParser;return parser.parseFromString(str,"image/svg+xml").documentElement})}},{key:"renderImageElement",value:function renderImageElement(src){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var scale=options.scale;var mimeType=options.mimeType;var quality=options.quality;return this.renderString(src,_extends$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es({},options,{format:"svg"})).then(function(str){if((typeof fabric===
"undefined"?"undefined":_typeof$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es(fabric))==="object"&&fabric.loadSVGFromString)return svgXmlToImageElementFabric$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es(str,{scale:scale,mimeType:mimeType,quality:quality});else return svgXmlToImageElement$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es(str,{scale:scale,mimeType:mimeType,
quality:quality})})}},{key:"renderJSONObject",value:function renderJSONObject(src){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var format=options.format;if(format!=="json"||format!=="json0")format="json";return this.renderString(src,_extends$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es({},options,{format:format})).then(function(str){return JSON.parse(str)})}}]);return Viz}();
var $jscompDefaultExport$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es=Viz$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es;var module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es={};module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es["default"]=$jscompDefaultExport$$module$Users$jude$Dropbox$Projects$aws$draw_graph$draw_graph_core$node_modules$viz_js$viz_es